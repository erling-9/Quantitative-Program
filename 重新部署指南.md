# é‡æ–°éƒ¨ç½²æŒ‡å—

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. ç¡®ä¿ä»£ç å·²æäº¤å¹¶æ¨é€åˆ° Git

```bash
# åœ¨æœ¬åœ°æ£€æŸ¥å½“å‰åˆ†æ”¯
git status

# æäº¤æ‰€æœ‰æ›´æ”¹
git add .
git commit -m "æ›´æ–°ï¼šæ·»åŠ è‡ªåŠ¨é¢„æµ‹åŠŸèƒ½ï¼Œæ”¯æŒæ—¥æœŸå’Œåˆçº¦æœˆä»½è¾“å…¥"

# æ¨é€åˆ°è¿œç¨‹ä»“åº“
git push origin main  # æˆ– masterï¼Œæ ¹æ®ä½ çš„åˆ†æ”¯å
```

## ğŸš€ éƒ¨ç½²æ–¹å¼

### æ–¹å¼ä¸€ï¼šä½¿ç”¨ GitHub Actions è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰

å¦‚æœä½ å·²ç»é…ç½®äº† GitHub Actionsï¼Œåªéœ€è¦ï¼š

1. **æ¨é€ä»£ç åˆ° GitHub**
   ```bash
   git push origin main
   ```

2. **æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€**
   - æ‰“å¼€ GitHub ä»“åº“é¡µé¢
   - ç‚¹å‡» **Actions** æ ‡ç­¾
   - æŸ¥çœ‹æœ€æ–°çš„éƒ¨ç½²å·¥ä½œæµæ˜¯å¦æˆåŠŸ

3. **å¦‚æœéƒ¨ç½²å¤±è´¥**
   - æŸ¥çœ‹ Actions æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
   - å‚è€ƒä¸‹é¢çš„æ‰‹åŠ¨éƒ¨ç½²æ­¥éª¤

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²ï¼ˆå¦‚æœè‡ªåŠ¨éƒ¨ç½²æœªé…ç½®æˆ–å¤±è´¥ï¼‰

#### æ­¥éª¤ 1ï¼šSSH è¿æ¥åˆ°æœåŠ¡å™¨

```bash
ssh username@your-server-ip
# ä¾‹å¦‚: ssh root@123.456.789.0
```

#### æ­¥éª¤ 2ï¼šè¿›å…¥éƒ¨ç½²ç›®å½•

```bash
cd /opt/quantitative-program
```

#### æ­¥éª¤ 3ï¼šæ‹‰å–æœ€æ–°ä»£ç 

```bash
# å¦‚æœç›®å½•ä¸å­˜åœ¨ï¼Œå…ˆåˆ›å»º
sudo mkdir -p /opt/quantitative-program
cd /opt/quantitative-program

# å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡éƒ¨ç½²ï¼Œå…‹éš†ä»“åº“
sudo git clone https://github.com/erling-9/Quantitative-Program.git .

# å¦‚æœå·²ç»éƒ¨ç½²è¿‡ï¼Œæ›´æ–°ä»£ç 
git fetch origin
git pull origin main  # æˆ– master
```

#### æ­¥éª¤ 4ï¼šæ›´æ–° Python ä¾èµ–

```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# å¦‚æœæ²¡æœ‰è™šæ‹Ÿç¯å¢ƒï¼Œå…ˆåˆ›å»º
# python3 -m venv venv
# source venv/bin/activate

# å‡çº§ pip
pip install --upgrade pip

# å®‰è£…/æ›´æ–°ä¾èµ–ï¼ˆåŒ…æ‹¬æ–°å¢çš„ä¾èµ–ï¼‰
pip install -r requirements.txt

# ç‰¹åˆ«æ³¨æ„ï¼šæ–°æ·»åŠ çš„ä¾èµ–åŒ…æ‹¬ï¼š
# - ibapi (Interactive Brokers API)
# - ib-insync (IB API åŒæ­¥æ¥å£)
# - jqdatasdk (èšå®½æ•°æ®SDK)
# - gunicorn (ç”Ÿäº§ç¯å¢ƒæœåŠ¡å™¨)
```

#### æ­¥éª¤ 5ï¼šåˆ›å»ºå¿…è¦çš„ç›®å½•

```bash
# ç¡®ä¿ä»¥ä¸‹ç›®å½•å­˜åœ¨
mkdir -p uploads logs "new file"
```

#### æ­¥éª¤ 6ï¼šæ£€æŸ¥æœåŠ¡çŠ¶æ€

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
sudo systemctl status quantitative-program
```

#### æ­¥éª¤ 7ï¼šé‡å¯æœåŠ¡

```bash
# é‡å¯æœåŠ¡ä»¥åŠ è½½æ–°ä»£ç 
sudo systemctl restart quantitative-program

# ç­‰å¾…å‡ ç§’åæ£€æŸ¥çŠ¶æ€
sleep 3
sudo systemctl status quantitative-program
```

#### æ­¥éª¤ 8ï¼šæŸ¥çœ‹æ—¥å¿—ç¡®è®¤éƒ¨ç½²æˆåŠŸ

```bash
# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
sudo journalctl -u quantitative-program -f

# æˆ–è€…æŸ¥çœ‹æœ€è¿‘50è¡Œæ—¥å¿—
sudo journalctl -u quantitative-program -n 50

# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f /opt/quantitative-program/logs/error.log
```

#### æ­¥éª¤ 9ï¼šæµ‹è¯• API

```bash
# æµ‹è¯•å¥åº·æ£€æŸ¥æ¥å£
curl http://localhost:8000/health

# åº”è¯¥è¿”å›ï¼š
# {"status":"ok","models_loaded":true/false}
```

## ğŸ”§ å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜ 1ï¼šæœåŠ¡å¯åŠ¨å¤±è´¥

**æ£€æŸ¥æ–¹æ³•ï¼š**
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
sudo journalctl -u quantitative-program -n 100

# æ‰‹åŠ¨æµ‹è¯•è¿è¡Œ
cd /opt/quantitative-program
source venv/bin/activate
python server.py
```

**å¯èƒ½åŸå› ï¼š**
- ç¼ºå°‘æ–°çš„ Python ä¾èµ–ï¼ˆibapi, ib-insync, jqdatasdkï¼‰
- ä»£ç è¯­æ³•é”™è¯¯
- ç«¯å£è¢«å ç”¨

**è§£å†³æ–¹æ³•ï¼š**
```bash
# é‡æ–°å®‰è£…ä¾èµ–
source venv/bin/activate
pip install -r requirements.txt --upgrade

# æ£€æŸ¥ç«¯å£å ç”¨
sudo netstat -tlnp | grep 8000

# å¦‚æœç«¯å£è¢«å ç”¨ï¼Œåœæ­¢å ç”¨è¿›ç¨‹æˆ–ä¿®æ”¹ç«¯å£
```

### é—®é¢˜ 2ï¼šå¯¼å…¥æ¨¡å—å¤±è´¥

**é”™è¯¯ä¿¡æ¯ï¼š** `ModuleNotFoundError: No module named 'ibapi'`

**è§£å†³æ–¹æ³•ï¼š**
```bash
cd /opt/quantitative-program
source venv/bin/activate
pip install ibapi ib-insync jqdatasdk
```

### é—®é¢˜ 3ï¼šæ‰¾ä¸åˆ° "new file" ç›®å½•

**è§£å†³æ–¹æ³•ï¼š**
```bash
cd /opt/quantitative-program
mkdir -p "new file"
# ç¡®ä¿ data predict.py æ–‡ä»¶åœ¨ new file ç›®å½•ä¸­
ls -la "new file/"
```

### é—®é¢˜ 4ï¼šæƒé™é—®é¢˜

**è§£å†³æ–¹æ³•ï¼š**
```bash
# è®¾ç½®æ­£ç¡®çš„æ–‡ä»¶æƒé™
sudo chown -R www-data:www-data /opt/quantitative-program
# æˆ–è€…å¦‚æœä½¿ç”¨ root ç”¨æˆ·
sudo chown -R root:root /opt/quantitative-program
```

## ğŸ“ éƒ¨ç½²æ£€æŸ¥æ¸…å•

éƒ¨ç½²å®Œæˆåï¼Œè¯·ç¡®è®¤ï¼š

- [ ] ä»£ç å·²æˆåŠŸæ‹‰å–åˆ°æœåŠ¡å™¨
- [ ] Python ä¾èµ–å·²å®‰è£…ï¼ˆåŒ…æ‹¬æ–°ä¾èµ–ï¼‰
- [ ] æœåŠ¡å·²æˆåŠŸé‡å¯
- [ ] `/health` æ¥å£å¯ä»¥è®¿é—®
- [ ] æ—¥å¿—ä¸­æ²¡æœ‰é”™è¯¯ä¿¡æ¯
- [ ] `new file/data predict.py` æ–‡ä»¶å­˜åœ¨
- [ ] å‰ç«¯å¯ä»¥æ­£å¸¸è®¿é—®

## ğŸ”„ å¿«é€Ÿæ›´æ–°å‘½ä»¤ï¼ˆå·²éƒ¨ç½²åï¼‰

å¦‚æœæœåŠ¡å·²ç»éƒ¨ç½²è¿‡ï¼Œåªéœ€è¦æ›´æ–°ä»£ç ï¼š

```bash
# ä¸€è¡Œå‘½ä»¤å®Œæˆæ›´æ–°
cd /opt/quantitative-program && \
git pull origin main && \
source venv/bin/activate && \
pip install -r requirements.txt --quiet && \
sudo systemctl restart quantitative-program && \
sleep 3 && \
sudo systemctl status quantitative-program
```

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š

1. **æœåŠ¡æ—¥å¿—**ï¼š`sudo journalctl -u quantitative-program -n 100`
2. **åº”ç”¨æ—¥å¿—**ï¼š`tail -f /opt/quantitative-program/logs/error.log`
3. **æœåŠ¡çŠ¶æ€**ï¼š`sudo systemctl status quantitative-program`
4. **Python ç¯å¢ƒ**ï¼š`source venv/bin/activate && python --version`

---

**éƒ¨ç½²å®Œæˆåï¼Œè®°å¾—æµ‹è¯•æ–°çš„ `/predict_auto` æ¥å£ï¼** ğŸ‰
